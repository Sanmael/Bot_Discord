services:
  - type: web
    name: bot-discord
    env: python
    plan: free
    buildCommand: >-
      apt-get update;
      apt-get install -y ffmpeg curl unzip;
      mkdir -p /opt/deno/bin;
      curl -L https://github.com/denoland/deno/releases/latest/download/deno-x86_64-unknown-linux-gnu.zip -o /tmp/deno.zip;
      unzip -o /tmp/deno.zip -d /opt/deno/bin;
      /opt/deno/bin/deno --version;
      pip install -r requirements.txt
    startCommand: python start.py
    envVars:
      - key: YT_JS_RUNTIME_PATH
        value: /opt/deno/bin/deno
      - key: YT_EJS_REMOTE
        value: ejs:npm
      - key: DISCORD_TOKEN
        sync: false
